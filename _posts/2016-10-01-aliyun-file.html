---
layout: post
title:  "关于后台从阿里云获取文件的一些思考"
date:   2016-10-01 14:24:00 +0800
categories: 阿里云
tag: 阿里云
---

后台从阿里云获取文件的功能已经做好，但是有一些小瑕疵。
出现的问题：
在日志（以后会加上日程和看板任务）里面的图片，目前是每次打开加载日志都重新获取一次图片一段时间内有效的地址，这样出现的问题是每次都重新获取图片做缓存，浪费了很多空间资源，其次，每次打开日志，里面的图片都会重新刷一次（闪一下）。
解决方案：
每次图片获取到地址后存到数据库里，存储的值包括，文件的id，上次获取的时间点，上次获取的有效时间等。等到相同文件需要再次获取时，查看那张表里本次文件的id数据的最后一条数据的时间是多少，地址是否还有效，如果有效则不会再重新获取新的地址而是把上次获取的地址返回。
写一个获取文件地址的公共方法来执行此逻辑。

[jekyll]:      http://jekyllrb.com
[jekyll-gh]:   https://github.com/jekyll/jekyll
[jekyll-help]: https://github.com/jekyll/jekyll-help
